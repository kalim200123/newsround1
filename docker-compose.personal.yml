services:
  # Backend Service (from Docker Hub) - TiDB 클라우드 사용
  backend:
    image: kalim200123/news-backend:latest
    container_name: news_backend
    environment:
      # TiDB 클라우드 연결 (.env 파일에서 가져옴)
      DB_HOST: ${DB_HOST}
      DB_PORT: ${DB_PORT}
      DB_USER: ${DB_USER}
      DB_PASSWORD: ${DB_PASSWORD}
      DB_DATABASE: ${DB_DATABASE}

      # 관리자 계정
      ADMIN_USERNAME: ${ADMIN_USERNAME:-admin}
      ADMIN_PASSWORD: ${ADMIN_PASSWORD:-admin123}

      # JWT 시크릿
      USER_JWT_SECRET: ${USER_JWT_SECRET:-user_secret_key}
      ADMIN_JWT_SECRET: ${ADMIN_JWT_SECRET:-admin_secret_key}
      INTERNAL_API_SECRET: ${INTERNAL_API_SECRET:-internal_secret}

      # S3 설정
      USE_S3: ${USE_S3:-false}
      AWS_REGION: ${AWS_REGION:-}
      AWS_ACCESS_KEY_ID: ${AWS_ACCESS_KEY_ID:-}
      AWS_SECRET_ACCESS_KEY: ${AWS_SECRET_ACCESS_KEY:-}
      AWS_S3_BUCKET_NAME: ${AWS_S3_BUCKET_NAME:-}
    ports:
      - "3002:3002"

  # Frontend Service (from Docker Hub)
  frontend:
    image: kalim200123/news-frontend:latest
    container_name: news_frontend
    ports:
      - "5173:5173"
    environment:
      - VITE_API_URL=http://localhost:3002
